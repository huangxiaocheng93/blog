网络应该是现代社会离不开的东西了，网络的出现本质上是为了解决多台主机之间数据传输的问题。那网络具体是怎么传输的呢？

从网络的物理形态来看，大致分为两种，一种是用网线，光纤都介质连接的，是有线网络；另一种是通过电磁波传播，例如：WIFI, 无线电话，是无线网络。

现在我们知道了，网络就是一台主机通过某种介质将数据传送给另一台主机，那具体是怎么传播的呢？

# 协议

以有线网络为例，常用的传输介质有双绞线（我们常用的网线），光纤等。很显然，双绞线只能传递电信号，光纤只能传递光信号，如果我们要通过这种介质来传递数据，应该会是如下的步骤：

![image](https://github.com/user-attachments/assets/ab26e392-698c-4e6d-8abf-38d3c13b0dee)

这中间，数据转换所遵循的规则就是**协议**。所以发送端和接收端必须使用同一套转换规则才有可能正常的通信。

举个比较通俗的例子来理解协议，人类所使用的语言就是一种协议，交流的双方（两端主机）如果都会说中文（中文协议）或者英文（英文协议），那么就可以沟通。如果说双方会的语言不一样，一方说英语，一方说中文（协议不通），那么显然是无法沟通的。

> [!TIP]
> 所以这里就能看出协议标准化的重要性了。

# OSI七层网络模型

随着网络的发展，网络中的设备也是越来越多，也越来越复杂，协议也越来越多，所以ISO组织为网络做了分层，也就是**OSI七层网络模型**。分层的目的是为了解耦和职责分离，这和代码编码种的分层道理是一样的。

上下层之间交互使用**接口**，这样就可以使得各层直接职责分离，不需要关注其他层的具体实现；同一层之间的交互使用的就是**协议**，OSI七层网络模型：

![Image00022](https://github.com/user-attachments/assets/3a038b99-c758-472b-bcb0-a7b6d4bb7568)

那么数据在这七层种是如何流转的呢？借助《图解TCP/IP》书中的一张图：

![Image00023](https://github.com/user-attachments/assets/d2caede2-4235-45da-88fe-0bf60c504ed8)

可以看出，数据在发送端从应用层开始，一层层往下传递，每一层都按照自己的协议处理数据，最终到达接收端，接收端的处理顺序刚好反过来，从物理层开始，一层一层用对应的协议解析，最终就到应用层就解析出实际的数据了。

# TCP/IP的网络模型

在其他的领域，一般都是先有标准，再有实现，例如先有Java虚拟机规范，然后各个虚拟机厂商根据规范来开发各自的虚拟机。网络层的规范就是OSI七层模型。

但是TCP/IP协议簇是先有了协议，才总结出了TCP/IP的网络模型。为什么TCP/IP协议簇没有按照OSI模型设计呢？我查完资料统计出来的原因大概有如下几个：

1. TCP/IP协议出现的时间要早于OSI参考模型的制定；
2. OSI模型基于理论，分层多，会更复杂和繁琐，TCP/IP基于实践，分层更少，会更加简单和实用；
3. OSI参考模型制定出来的时候TCP/IP已经事实占领了市场，所以TCP/IP说了算。

> [!TIP]
> 但是话说回来，TCP/IP模型仍然是参考了OSI参考模型，在此基础上做了一些简化。


下面是TCP/IP模型和OSI模型的对比：

![Image00072](https://github.com/user-attachments/assets/aaa91c4d-68f7-40b6-8778-1be5eb49ae02)

可以看出来传输层及以下，OSI模型和TCP/IP模型是对其的，实际功能也基本是对其的，TCP/IP模型合并了OSI模型的应用层、表示层和会话层，统一成了应用层。

在我个人看来，TCP/IP模型会更加合理，OSI模型中的这三层也是我个人认为最难理解，边界最模糊的部分。

# 网络分类
## 以网络连接的范围分类

![image](https://github.com/user-attachments/assets/f0db2e94-0798-426f-b731-7cef3cf69947)

### 局域网和广域网

局域网（Local Area Network，LAN）是范围最小的网络，例如家庭网络，公司内网络或者学校内网络。特点是局域网内的主机可以通过内网地址互相通信，但是无法与局域网外的主机互相通信。


广域网（Wide Area Network，WAN）是把多个局域网或者广域网连起来的网络，广域网实现了更大范围内的主机之间的通信。如图所示的局域网之外的无论是城域网还是骨干网都可以认为是广域网，互联网可以认为是范围最大的广域网。

> [!TIP]
> 城域网和骨干网更多的是从网络服务商（ISP）的角度来看的，并不属于网络的基础知识。例如把整个广州市连接起来的网络可以认为是城域网，城域网要进一步与其他城域网互通或者和国外的网络互通，就要再往上接入骨干网。城域网并不是一个地域概念，不能认为广州市就是一个城域网，佛山市就是另一个城域网，城域网的“城”字我觉得可以认为是一个形容词，描述的是这个这个级别的广域网连接的一个大概范围。

## 以数据链路层使用的协议分类

> [!IMPORTANT]
> 这里要非常注意的是，是以数据链路层协议做的划分，和上层协议没有任何关系。

### 以太网
很多人都搞不清以太网和互联网的区别（我以前也搞不清），实际上就是没有任何可比性，两者是在两个不同维度对网络类型的划分。
以太网实际上是一套工作在局域网的协议，我们也可以把工作在这套协议下的网络称为以太网。


